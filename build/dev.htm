<script>var Participant = function(id, name, avatar) {
    this.getId = function() {
        return id;
    }
    this.getDisplayName = function() {
        return name;
    }
    this.getThumbnailUrl = function() {
        return avatar;
    }
};

var wave = {
    state: {
        
    },
    participants: [
        
    ],
    getViewer: function() {
        return wave.participants[0];
    },
    getState: function() {
        return {
            get: function(key) {
                return wave.state[key];
            },
            getKeys: function() {
                return Object.keys(wave.state);
            },
            submitDelta: function(delta) {
                for (var i in delta) {
                    var value = delta[i];
                    if (value == null) {
                        if (i in wave.state) {
                            delete wave.state[i];
                        }
                    } else {
                        wave.state[i] = value;
                    }
                }
                wave.stateCallback();
            }
        }
    },
    getParticipants: function() {
        return wave.participants;
    },
    getParticipantById: function(id) {
        for (var i in wave.participants) {
            var participant = wave.participants[i];
            if (participant.getId() == id) {
                return participant;
            }
        }
        return null;
    },
    stateCallback: function() {},
    setStateCallback: function(callback) {
        wave.stateCallback = callback;
    },
    participantCallback: function() {},
    setParticipantCallback: function(callback) {
        wave.participantCallback = callback;
    }
};

var callbacks = [];
var gadgets = {
    json: JSON,
    util: {
        registerOnLoadHandler: function(callback) {
            callbacks.push(callback);
        }
    },
    window: {
        adjustHeight: function() {
            console.log('adjust window height');
        }
    }
};
</script>
<!DOCTYPE html>
<html>
    <head>
        <style>
            * {
    padding: 0;
    margin: 0;
}

.board table {
    border-collapse: collapse;
}

.board td {
    width: 50px;
    height: 50px;
    border: 1px solid #555;
}

.board tr:nth-child(2n) td:nth-child(even) {
    background: #ffce9e;
}

.board tr:nth-child(2n) td:nth-child(odd) {
    background: #d18b47;
}

.board tr:nth-child(2n+1) td:nth-child(even) {
    background: #d18b47;
}

.board tr:nth-child(2n+1) td:nth-child(odd) {
    background: #ffce9e;
}

.piece {
    width: 100%;
    height: 100%;
    background: no-repeat url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAABkCAYAAAA8AQ3AAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3QIcEwA4NBm7oQAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAACAASURBVHja7X15eE1X9//nZJZIbiITMgpRxFAR6Yuax5KqooYaSouqqhpa1aIoqrxeWm/JK6qmX5Uipa+aWiTGJqlQUzREBiERkVHSDDdn/f4459yeXPcmdzon8X3P53nOI87ed5+1p7XXXnvttQAFChQoUKBAgQIFChQoUKBAgQIFChQoUKBAgQIF/7MYA+AQ/4x5huvRF8BB/unzjPeJNf8oUKBAhIMACADLPwTgx3pI51sAogC8ryd9so56THqG++Uq/yiQGP0BHAYwVE/6EX4wTVSaqs4xCAANHTqUBLz88svE98/AekRngogZEYAMHXnKvLy82KqqKqqqqiIvLy8WwF868g0GkM+Xkwmgcz3tm1T+USAx0kUDa45WWpxo4JUpTVXn+BoAW1hYSCzLEsuyVFBQIPTPv+sJjUMB0NSpU6myspKWLl0qMNRZWvlo7NixGsY7duxYIZ8YzwGghg0bsuPHjycbGxthnKrqSV1n8vToemY+a4PrfQDnAaQAOF2Pxd2HzZs3p7Zt2wqDoQv//jMANHPmTFqyZInQCR71jPbRPMNNFT3pAHoYkE/IO1orbw89ZY6uB/VdA4BSU1M1DCs1NVXom9X1pE8WAqA7d+4Qy7KkVqsFhhqlle8WAHbbtm20bds2IU+SVp51ANiMjAwiIoqNjRXq+l49qWs/ADEAfuGlw7/4v2P4tGcCjQEUCpKJv7+/WDROB9Cgvu29nZyciIgEOp8AOAGAgoKCiIho48aNwkCJBjAXQLd6QvtOoY0DAgLI29tbqMOnWvm2i/MFBASQqF+2a+X9FADr7e2tnW9nPahvGwDUokULiouLo7i4OGrRooXQN61lpGM+P0Y261jE+gCgiIgIun79Ok2ZMkWg702tfIEAKkU6rEr+3VMMKz09nYiIYmJi9DEsD56WEwA+rKO+SeOfZw55ANgtW7aQGJ999pm+VaSusRgA/fTTT/Tdd99VE2vj4+OJZVn6/fffSUsnITyxAMbWIe07AGjaOCcnR6DrCp+2A8A2fqEgbYgWkW2i/FcAUE5Ojna+HfWkv1br2H58IeP3L+JpZbm7Vp5orfGSUEN5uraCAloKW8KRI0fq2xK666DngsKwDMNcAKTNrAQsWLBA6JxX6xHNqwBQYmIi1YKq8vJySkhIoPXr11O/fv3EA7JMh45CNobFsiwREZWUlFANOgV9DEvnU1JSQkRELMvWF4bVAMBeYXKGh4dTeHi4uA/2yCC9vwCAJk2aJJZ4WAD/0ZH3HZ6umhTRYaI2D9OT5yXRjiUDTyvd/wOAjY2NJSKiSZMmCeW9IGPfuPKCSh7/9zODWACsvhlfWVkpdHB9Wa1VAMjX15dMRVRUFLm7uwuTJhNA87piWMK/+iBONzRvPWFYw4SJPWDAAEpOTtbQmZycTP379xcz22ES0jEWAJ04cULTPvw3j+vI20tEU4Ce8maJ8tS04Km19KtiHBcWI5Zl6fjx40J5ckn+c3QseLOl+piNhctr6ufnx+j9mI0NADAAmtYThpUIgA4dOqShmYjAMIzBBUydOhVTp05lVq9ejQULFjQFcAfcSdF/ZaCfAOD06dOQ61t1gC8AfNSgQQM6evQo07NnT3B8gkOLFi1w4sQJxMTEYPDgwfTXX3/9yG8bF0hAy0kAmDFjBm3cuJHZvXu38P6UATsPXfZYXUTt2gXABh15JuJvg0x7HemnAAyYNGkSXn/9dbz77rvEz7FfZVpI1gUFBeH777/nOPrYsbh79+56XrI8VN8lrOP6JCytI+j/1ANavwNAn3/+OZ05c4YAUI8ePcgc3Llzh5ycnFgZt737dOjVpHhYAPvrSl/Vtm1bqqioqFEqZFmWKioqKCQkROpTwxlabVOiJ59YwlLr0/sEBQVRUFAQ1aD/uS7q41568pRo0TRDpv6pdHJyYoX2F/rH0dFROESo9xLW9wAGrFixAosWLaqWwDAM5s6dK0hYP9QxswoG8HpoaCg+/vhjjUR19+5dswoNCgpCdnY24+fnRwUFBdEAngfwh4T1mA3O8NVl5MiRzLBhw1BVVWWRgq2trXHw4EHs37+fABQDeFfmPhoJYH7Hjh2RmJj4lOQrXtGF8WVjY4Pr168jNDQUly9fng8gHsABC9O1iV8oXgSwC4ATgFH6xvTzzz+PK1euWPP10Wb6AWFhYcLY07VtbAkgxNnZGcXFxfroGQXAkWdaEwCcA/DIAvW05etWUIN0ZbN+/XpN+wv48ssvmWnTptnweQ7qUcWoa2D2ssCbVw6yffv2fVpjXVVFbdu2FVbre6hb84YrANh79+7R4sWLNSvTwoULyVywLEu5ublCPf+C9PerVEK7HzhwgCyFAwcOCHUohPyGio4AyNXVldWnb/Pz8yM/Pz+9ujeVSiVIJVKOs/N8G6l19HMvAPTtt98K7XheKz0MAK1Zs4bWrFmjT/G+FQAtWrSI9EhY1vy3dZVvCtwBbAF3iCSW2Ar5HYlYh7YQAN2+ffupPkhOThZ+9wmftzmAjQCydEjvsRLrHfWiEAC7b98+nUpd4f/r1q0TOvBOHTGrVwHQ9OnTiYho+PDhBIC8vb0NYkaG4vDhw0KHyCFNqviVkFWpVOTq6mrWo1KphD4qQN1YVX8DgGJiYvS2eWBgIAUGBurtp9OnTwvt/42EdG4Ubdf26mJYu3fv1owxAJ6i9FkA6OzZs3T27Fm91vAhISHES7m6GNZe0ZZ9o5l1Ee42UnBwME2bNo0WLFhAEydOFGzdhHreAncCOQsAXb9+/an2v3btmkDvWvA2jcIcGz16NM2fP59mzZpFvXr1Epd7mxd6ZMF2APTDDz8YNJlXrlwpVGhJHUyGfABsVVUVsSxLt2/fpiVLllBpaWmtDKmqqoratGlDp0+fNoh5iU6vQmSoV28AtGfPHrOlqz179gh0966jRYXat2//FF27d+8mPz8/atasGTEMQwzDULNmzcjPz4927979VP527dqRxIcFUwEIDJ5Q3aC4FwDasWMHnTt3TkhfpaU+0dwl5Cfu96L06QBo586dtGPHDl0Mq5vWt6eaUY9RAMjT05PVxYCIiPLy8gSzJIHBJAKgvXv3PnX6zI8fIR/7+uuvU0pKit7xtnDhQnH+QKkHlz0A+sc//mHUpGjSpInUg0kXPgBA69ev13l8Xxvu3r1LAGjJkiUGSWNZWVlCR5ySoW6aCWIu9EwQuTAIAG3duvWpPjGGYbEsS1u3bpX6YnQ4ALFRdJ6+/vDw8CAApWKFu1iq528piBXvaeAPsPT0Rx4Alv828bSYAleBWQmLeE0oLi6mrl27ag5jJkyY8FSe1157jQCQi4sLXb161aD5FRcXJ7RhiQS69WoYC4AOHjxo1JZp/fr1QqW7yLlyN2rUiDV1In/++ecE3g7HUIi2Az4KwzIInwEg4f6cPtS0JRSQkZEh1OMziWi1BW9IunnzZuFb63T1hzB2wBmCAgC9+uqrGlpfffVV8QIeCv4eq57+WAeANm/eLDYUtTWxDjsgutVhqFpEMAK3srKq9l7YvjZr1qzWk11tREdHC3XZLuUAWweAzcvLM2pSJCYmyn2RczUA2rdvn1GNKHTGkydPiGd4Rv3u0qVLQj3/pTAsg/AtAKqqqqqRRn1KdzH4i8fEK6+lQkmHDh2IiKhNmzbC91po9wd/C4EFdzm4naBwFyBSvHcAZ7XP3rt3j1iW1e6PFgCoTZs2RETUoUMHMvO0jUJDQ00aJ2vXriUA1KtXLyIievDgAQEgd3d3UqvVRs8zQ7bxVhboMGcAjLOzs3E/+ju/HEpdewDzg4KCMHLkSKMMQ4Xj9PBwTuLu0aOHwb9lGAahoaFo3LgxwDl0U1A7ygBQeXl5zavP6tVYvbpmUyu+DOHqlFS48scfnOXK0aNHhe8d09r+wdHREYMGDWLAeTEYCgBduvy9uRD93QfA6PDwcMbX11d7rJbyZRP/LfDfvmIi7Z0BYPLkydWMcQ3FvHnzMG3aNMTExCAyMhKvvsqZHp4/fx5WVlZGzTMBEyZMEP4MkYphPQCABw8eGMUERPnvyzAJVgHApk2bjOoYgVl1794dN2/e5F8Z37GTJ08WGHMrhR/VimsAmEuXLtXYV2PHjtXYYOnru0uXLgGc3d81KRkWAMrPz4e/vz8++eQTBtwx/lJteng7RM22t2vXrpp0/m+NwetHH32kq/5LATT/5JNPGH9/f+Tn5wu/MZVhBQKc/aApzIWIsHnzZvj4+GDGjBmIi4vD5MmT8dxzz5lUHgB4e2sOCj2lYlhnAODHHw33UsswDKKjo4X/xko8AawBzAkKCsLAgQMNbkiBWXXq1Annzp0DOOt8xsXFxehOHTlypPDfoQo/qhUHAWDDhg0mD3phjG3YsKFamRIyLObKFY5nrFy5El5eXoKuisT09O/fHw0bNgQAK29vb8bK6u/pZ2VlBW9vbwaArZ2dHYYPH65dfwLwkpeXF61cuZL7MPdNxgyGlQcA+fn5JklYDMOAiMRzGWvWrDGpLAFpaWnCn/ekYlgnAVR++umnJEzQ2iZwZWUlvvrqK+H2+V2JJ8B8AFi7dm01GmqjsbCwEP7+/pSYmAhwni4XAUBAQIDRnRoaGioMuP4KP6oVWQBi9u3bRxcvXjS5kAsXLghW+qcBZEtI7x8C8yAiEBGOHDkicBrG3r769b/p06cDAFq1aoWbN28iMTERly5dwrVr19CyZUsAwBtvvIEnT55oftOgQQOBMeHYsWOM8B2BScL02xRnAeDgwYMmLw5idQkAeHh4mLXQbN26FeCMYVOkHGTTANCoUaNqPMIU3nfr1k1QrMnhlfCBo6MjlZWVkZWVFVlZWVFubm6Nir+LFy+StbW1ttvklwGQqdbkfJ3VEtazF/5vKN0BwIVvKzYyMtJo+iMjIwUFt5ovS0rYAqDXXnuNLl++TFu3bqUVK1aQm5sbASA3NzdiGMYidzqdnJxoxowZtGbNGoqNjRWfLNqaQf9ZAGx2drZJSnIBtra2ZGtrayn7v3/qZZAW7LgbANoMHjwYhw8f1nBfsdRSVlaGHj164PfffweAnwFEyDDwC99991307t1bszX74Ycf8Nprr+ncAn788cf44osvhBvvPYUtL7grC28VFBQwKpXx5wQffvihIOV5AsiViGGd3rFjByZONC9exs6dO/HGG28AnOFoTB0xrWbg7gK6mzBOiW/jcMjjVK5K327F29sbTZs2haenJzw8PKBSqeDs7IwGDRrA3t4e1tbcjZ6qqiqUl5fjr7/+QnFxMQoLC5Gbm4tHjx7hwYMHePjwob5vV0C3FwdD0RrAzTZt2uDGjRtGeysRYGdnxxFTUWGSLiw/Px8eHh5EROWo4TqVJQy07Hg9VBsAaNKkCW7duoXWrVs/JTpevXoVwcHBAsMaAi48k5ReDZwAQKVSYcSIEXjzTc5LrcCshM4hIjx69AjdunXDnTt3ACAZwD9Q/eLnm8HBwSYxKyLC888/L/y3I7ijbQU1IxVcYIllXl5eaNu2ba1beYZhcP36deTk5DD8Nj5NJlqvAejwz3/+E82bN0erVq3QvHlzzSS2FCoqKpCSkoJbt24hJSUFH374IQDcNLPYJABLbt68uWzgwIE4fvy4yUyrJl1wTelFRUVo3rw5EREDie0yXflJzb755pu13rkT3peVldHgwYMF8S8V0l4QpvHjx1ejY+nSpTRgwABKT08nlmXp5s2b4qsBy3WUMQe8oZ6puHLlCkF3ZB5lS6gbfQCQYONkDHjbJDmvFi0CQHPmzCG58P777wt1XGihOuwBQB07dqTy8nKdc/m3336jtWvX0rhx46hz587UuHFjsrGx0WxZGYYhW1tb8vHxoa5du9KkSZNow4YNdOXKFb284caNG+Tg4CCLSyYrAI8BsN9//71Rl4OFfLz1LwvgTwnpTHFwcGDFPpOEBl6wYAHl5eURwzBCg+mK+eYMMy3kiYhKS0uFum6SkmFt377d7Mmwffv2+sCw/gTAGmstLepjFtxFXbmQCICWLVv2FE1FRUWUmZlJSUlJFB8fT2fOnKGTJ0/S8ePH6ciRI3TkyBE6fvw4nTx5ks6cOUPx8fGUlJREmZmZVFRU9FR5otBhiRauwwYAZGdnx0ZHR2ss17U8uhIAcnBwoDZt2lCvXr1o6NChNGLECHr55Zepe/fu9Nxzz1VjZMIzbNgwOn78uKYeq1atEgsKBh1ImSP3nQPQde/evcyoUaNMLuTzzz/HwoULAeD/gfPnY2lMBRAVGhqKyZMnIy8vD0uWcHeub968icGDB1NaWhoDoJOeAZAMoEVCQgLTqVMns4/aARwFFxzT0hgK4JC7uzuMNeLVRnFxMR4/fgwArwD4qQ6YlR2A8tatW2PMmDFgWdaoH1tbW+P7779HUlKSUFalTHRfBdB28ODBTFJSElJTLRdXlGEYBAYGonXr1jhy5AiBc+zXXoI6CKoaGzF/6N69O4YMGYI+ffogLCzMoHlQUVGB+Ph4nDp1CocOHQJ/4g53d3c0bNgQ6enpAGe+0BWce3HJGNZbAL6ZPn06IiMjzW6hgQMH4sSJEwDQF9JcFF6nvRVzc3NDWFgYfvnlF4BzX6vLPW08gM7r1q3DnDnm7+Q8PT2Rm5t7TaKBlgHAt7i4mOFtfcxiWC4uLoKPev86YFgvgYu4bQkM5hcJOSC4+SFfX1+mefPm8PPzg6enJ1xdXeHs7AxnZ2c4OTnBxsYGtra2gttwqNVqVFZWQq1Wo6SkBMXFxSguLkZBQQFycnKQmZmJlJQUZGZmCgdCruBcOkml+32iUqmwfPlyvPvuuxDbjOliTCzLwtraGra2+g8sS0tLsX79eixfvly4hbAYwAqjGLeJFWJdXFxQWFjImKugIyJUVFTAwcGBwHlKlMonjh3PKIrBXa78B/9+MzhXHtq4BCB01qxZ+OqrryxCQEhICG7evJkjQR1XA5g/YsQIzJw502iJ5Km9vpUVvv76axw4cADggpd+JDPDmgzg271796Jz585Gjy8iQkJCAkaPHi2UtV1G2mcA2Lht2zZMmjTJogVv27ZNODiaASBS4nrQ5MmT8e233wIACgsLcezYMZw7dw6XL1/G7du3kZOTo/fHTZs2RcuWLREaGoru3bvjpZdegmCT1q9fP5w8eZI1RXdtyinhRwCYTZs2ibc5Zom69vb2WL58ObN48WIv1OBu1kxUAPid/7sbOBuwW7xkoksf0VFgVpY6NfHw8AAsHz16ATjjWDpw4ADDMxmLDVq+7HzIG/svHgAWLFiA7777TnPPrqZ+EKddvHgRCxYsqFaWjDgOAFlZWZoXeXl5yMrKQl5eHgoLC1FYWIjy8nKNVAVAI23Z29tDpVLB1dUVbm5uaNq0Kdzc3AAA2dka+9cTclSkuLgYX375JTZt2oTbt29XS2vVqhXCwsLg6ekJlUoFGxsbVFZWoqCgAA8fPsTdu3cRExODmJgYrFvHObB4/vnnMXv2bJSVlZksLJnyozwnJyfXJ0+eMJZuIN7ALhH6Y7TJgWMABs6ZMwfr1q2z6BHvyy+/LNioWbLtlgBYumjRIri7u1u0IR4/fowVK1YA3B22ZTL3w0Jhu+Dk5IQhQ4YgPDwcLVu2RJMmTTR6uuLiYmRlZSE5ORnx8fH4+eefUVKicV6wDFp3+mTAWwC+8fHxwaNHj0yyS9IFe3t7uLu7C3dwp0BaDxTCYsVJNTY2GDt2LCIiItC7d294enoaXEhmZiZOnTqFn376CToWU0ZqhtUOwNUFCxZg1apVFm+hsWPHYs+ePQBn8FlcB8xqHoC148ePx65duyzKrLTqZ3GGlZaWZvS1odqQnp6OwMDAumJYAHdC+xGA18EZkgoTidExuYR3qQB289tkucdQC3CufsnJyYkR7LGaNGkCHx8fjeGoSqWCo6OjRo8FQKO/Ki0t1Uhhubm5uH//PrKysjT2V7ybGgaAFywTbELfzquyadOm2Lx5MyIidNt3l5WVITc3F6WlpVCr1bC1tYWTkxM8PT2r6bLE82j37t2YMWMGCgsLLT0PdGIRALpx44ZZZvz6jqNFftDH1cHkcAJAfn5+rLH+2w2FyNmaJfEJtELLWwo5OTnawQSkghs4i+vO4E6MegEYAO7kcxy4k94vwZnRaGx+UP3YPBfAej7veP63A/iyuvJlt+a/JRVuAmDFgV5NiQdQ0294/2osdB8SWVTCeuONNzTfvXz5Mn3xxRcUERFBPj4+Bl0lCgwMpOHDh9OXX35Jt27d0pTVp08fAnc7wCROagz6AkCbNm0s3joMw+Cll14SVsu+4KJ0yImPAWD79u2MpSUrASLLZ1uYd9T+LwAj+LZyBYB27drBwcHBovTyugYA+JBnBAy4sFnzLFD8FHDh3EON2KIw4eHhGD16NGbPng0iwldffYW9e/ciPj7eHdxpr6EddwxcgNMkCzVXEwCt33zzTQQHB+sc36bMCW3wF+kZyBAn4OHDh5g9ezYiIyOrbW0DAgIwaNAgBAUFaXRYtra2qKioqKbDunHjBqKjozXeHFQqFWbPno2ioiLZdFhFYWFhzgkJCZI1koeHBx4/fizV0X9NSHZxcQnmRVVJ8PbbbyMqKgoAHACUm1FUBsMwfoGBgRrPEua49Kht0qhUKjAMg7S0NBDRPZhn6mAHzoYoGAB169aNCQsLg7+/P1xdXWFvbw9bW1vNvy4uLnB1dYWPj49G+axrqwFwblIyMzNRWFiIoqIiVFZWory8XPNvQUEBMjIykJCQgAsXLghbq6088zQX3wEYe+rUKaZXr16SLHgCfH19cf/+fYA7wHksRbfzUhwAIDAwEBMmTMCQIUPwwgsvGF3YmTNncOjQIezatQuPHj0yS4dlrITl3Lx5c2mVAC1a4PHjx8F1sCUMHjhwIJ4RsAEBAWYHfjUWzZo1Q1paGmtmMdcAtFi2bBk+/fRTJj09HVeuXMHDhw9RUlKiUZjb2dnB3t4eubm5sLa2xsWLF1FcXIz09HT8/vvvuHDhAgDO8V1YWBgCAgLg7OwMR0dHVFVVgWVZlJeXV5MMGjZsiN69e2Pu3Lnw9PRkBg8ejJiYmLfAXZI2d4EMAoAXX3xRUmYFAOvXrwdvrN0N0hj2Er+g2ru6umLp0qUYP3685qK2sejRowfCwsLQrFkzzJs3jyoqKhjo8XdlSYbVSBi0UiIgIABxcXEOMjMAT4A70Vi2bJkk0oqVlRVEkqnZbmby8/OxcuVKzbG41LC1tRU8XJqDBgBa2tnZ0blz52Brawu12uSmOAkAFy5c6CswL6MGvo0N+vfvL0zOdrzUa44r5aUAjtnZ2VHDhg2Z4OBgBAYGonHjxmjcuDG8vLzg4uKiMR61t7fXqXQvLy/XGI0WFRUhJycH2dnZyM7ORmpqKu7cuQM+vgAD4FcJu9wBwPyCgoJlkyZNcpg0aRJ16dKFiYiIwIsvvoiOHTvWeKMiLy8PiYmJOHPmDH766Sf88ccfAs354Exxtki9JfSBgebzFhRL5YILpLMalqJuV/lJVhcwd7veBVykliBwdnCHACTwY6sYnDLWBpzLFFvRoloBLthCto6+cgVnjOvEbzmFRaGSlxSEyMzOAHzBKeBfAeey+i6AiQB+s0Db9OX1cs35La+Thdu+BNwpZAo4g165bMyG8zrMQdo6RQ8PD7i6usLOzg7l5eXIy8sTu25mRHmjAUTBTBsyYyaOF7g7RmUyNJAT/rZElwsqfuBLzahyoBWgwBSBDUCAWM8gE6wApNfBd59lNADQmNc3OfOLY0Oesdrgb+d7lTxjrQDwBEARz8BzeSb9Vz2pz/PgTl1D+EWnMV8fGxHtWTxTvQbgPCx3sKFAgQIFChQoUKBAgQIFChQoUKBAgQIFChQoUKBAgQIFChQoUKBAgQIFChQoUKBAgQIFChQoUKDAbIwBdwfxEP/3swwX/nnWYQ1pAyIrUPBM4iC4y7Qs/g7C+eMzWA97cJe+BQ+dCfy7ZxVX+UeBxOgP4DA4l7q6cIQfUBOVpqpzDIJ+l7z1yZlZOID7PF2F4IKTauMXEcMVGLAuTwZD+DKIL7NzPe2bVP5RIDHSRQNHO1pqnGgwlSlNVef4WmuSiyf7v+sJjSoRTeJ/n9PKp4/xivGcnrJU9aSuM2uox0wpPmglYWXeB+daIgXAaQCT6ukkcADn9oXARYjuwr//jF8pwafbw/IxBc3FaJ7hpoqedAA9DMgn5B2tlbeHnjJH14P6lkK3SyQG5rvssRQmiWiCaGxNN6Gsd1DdrxSj9Y26xi0AseAcCZbxz6/8u1vPyirYWCTCaq8M6eD8A9W3vbd4pX7Ci+a6Vo1ocIELutUT2nfqkDhYAJ9q5dteg2SyXSvvp3rK3FkP6tumhhW9tYx0LODHSJSORex9Pe28Xoe0qJ1PW0pcr6ff3tfK5wnOg+cJnra6QBr/PHPI09PIQsfVN2dei2FAyCIx4x08eDC1adOG+JVkbB3SvkMPnVf4tB0AtvELhb46pfN5hPxX9OTbUU/6a7UO2uSOSk1aC7GHCVtCAFgpKmuFjnRDtoSeWmnEqzIUhmUA5ho48V+tRzSvMpDmKuFvcei4b775hvz8/MoAzKpHDEuKp64ZVgMAe3VMTuHvPTJI7130LGJRWvk6A3ggyjNYT3keojz61A2DRXke4Gml+xY9AkIXGfvGlRdU8iC9116LIrYG6UrcwfVltVYZO3Ht7Oxo8uTJdOHCBXGwS3bLli0EINPa2rq5wrAsjmFG0DlMQjpe1/NNfX7KhfRBetJHiPKM0JNHfDKqC/rUF6/L1DdzdHx79rPCsG4bOKh+qSf0phjAYPU+vr6+9N///lcjbj169Ij18vIihmFelon+7TIyrO111Edf6JCqatyyS7hF9NLz3Y9qYFgsgKN60teJylinJ89RUb306dN00eRVxwvJK88CwzpuoIT1n3pA63cCTb169SIi/2g5mgAAEaVJREFUopiYGJMmc8+ePamyspJYliW1Ws36+PgQwzCSb3tHjBixh4hYkh7siBEj9tYTfZWhz2qJaHpPayzXpLcR0+NQiz5MVwQcB+g3edDWH4nn3UyZ+qcS+g9zKp8FhjXJwMHUp47pDBZocXJy0mztMjIyTJZA3N3dqaioiFiWpZKSEtbe3p4AdJC4Ht6NGjXKcHNzIymfRo0aZci0Yosxsqb2HjNmDI0ZM6a2fhkhoaQl1n0+ZwDDmldLui6GNM8AhvWcKH2VBfvJthZ9lCHb9GE1qGJMCoFmydh/3gCSwYUyYmpZde4DaIm6C110BVxsPYaPQAwAWLFiBRYvXmz6KPbyQnZ2NgDg0qVL1Llz53JwIZCqJK7PSQB9AgICoFJZxqawsLAQ6enpAHAKXLw9OeEILgYf6RtLGRkZAAB/f/+axhnDlyXFOPMA8Ij/zj1wYde05xarNeb9ROnNwMVEFCMI1a3F74GLByq0gZUOxpXOl8uAOzHMNaNO7vx2egKqXxMqAncb5GsAF/l3C6H7ZFOMhQA+BxencS64+IaNtfKcAWe+cVBuJlBohD6IBXCnjpjVq2Ja9u/fT0REWVlZFtH1DBo0SLOPmjJlCgH4QaZ6RWZnZ1NpaalFnuzsbAIQWUd99E1t7ZyamkqpqamG9Mk3Em+JhO8s0Uqz10GLWOIeryN9vCi9g4507buGS0Rp5m7BJgOgDz74gOLj4yk/P59KSkooLS2NfvzxR5o8eTLLMAyBMwh9AdypeG1tvxb8oUCzZs1oxYoV9Ntvv9Hjx4+ptLSUMjMzaf/+/Wzfvn0JwG1ra2tvuQaYqcrfJXUwGfLFjLV58+a0ZMkScnBwsJiCOjo6moiI1Gq18C5E6koxDNMTFla082XWBfRuA9PT0yklJYWqqqqoqqqKUlJSKD09vbbtoVSI1fqOWIJqqGOR3ipK/w+eNs8Q63a36hAAGorS/bTSYs2ox6guXbqQWq3W6EMTEhIoNjaW0tLSqikzN23aJKg7Eg0QSigkJIS9ePFitTISExPp9OnTdPfuXc27GzdusO7u7mRtbR0o9eCyN3NiyIkPIMOJmqAXIyJavHgxy2+rpEYvCerSqw6Y1SAJGJZUF6NXaU3QW1rbq5rG+zUdaddqYdruovRbWgxtlSkVsLGxcW3dujUREVtRUUHDhw/X2YavvfYaJSQkaMb1O++8U+vJ7ZYtWzT5o6KiqH379k/lsbe3pzVr1hARUWVlJevt7V3i5eVlI+UAG2vmpJDTwM3Q43Gzny+//JKIiMrLy4V3PgrDMgifGUKbEVtC4suUAkN1fGsun9YENdtH1bSA67P3asKn6zLQHmpiHXZkZ2cTEZG3t3etbdm1a1d69OgRERGdPHlSZ54GDRpQSkoKERFduHCB3NzcDDppF6lmtks5wNaZyQTek2kirIZ8NkukUqk0q8vQoUMJwL8UhmUQvjWEtoyMDGNOdbdKRKsHdNuBeQAI1LNNiuOV6/poDeLz6JpTgaJvaqebdDG/e/fuRES0dOlSo8bGnj17iIjo5s2b1d7b2tpqGNqiRYuMKnPx4sVERNSnTx9Jd15bzJwUi2SYBPZyMivhOXnyJLEsSz///DMBKFAYlkHYZMgCaKBZgzCxN8qkeBe+dwlA0xpoWmxiWlO+bO32MVXh3nnp0qVEROTr62v0+Fi5ciUREcXGxmreXbt2jYiIxo8fb3R5fn5+RET06aefSqr3XWbmpJgswyRYZ6EJbJQkOW7cOI2Uxb9rpTCsWvGOBPWYLiG9sXq++W/UfC9Vn8FlVQ2/01emqQr313bs2CEen0Y/kZGRREQ0f/58Wr58uUnSmngrSUS0YcMGScdeXzMHU5DEE8DaQoM+0tjf2NnZaRhWz549CcB8hWHViiYS1KOxhPSuqmFhs6S+tKYyV5k6d9euXUtERC4uLibTdvfuXaqsrKSqqipKSkoyuZwOHToQEdGsWbMInO2WZKgwoXNYcEZvUuNjCwySf9dw6lPjIygfV61axULaO5T/VxgWwDl8ZC00yaU+oR1aF+oGSyjcGYaxi4iIICKiGTNmmPz9zp07axbmjh07mlzON998Q0RELVu2lPxazzQTiewnw+B/AIAaNWpEarWa1Go1NWrUyBhmJbhNftmUOm7dupVYlqULFy4QALXCsAyCC99WrJnMSg3pI9J41AOGZY4n3LMVFRVsSUmJWTRoqT6Mflq0aKGx/wLwTzkG2Q0jiTws08DX2JEIGDlypKHMqofW4YLRE2jatGlERFRVVWWJwfW/wrAA7urKo7CwMKMvd4eFhbEAcvhTNTlQl8yKNZP21sOHDyciolOnTplMR2FhIVVUVJj0W0dHRyooKCAiYps2bVrjNSpLGGjZ8Uq/Nkb+bgi48ExSejXQXLDct28ftm7lTrf3799f2++SAfwD1U/23oQJdy+vXuUiH1lZWcHZ2RnFxcUdUX/c69RnpAL4d1ZW1rLTp0+DW7wN2uYgKyuLAXfvLU0mWv9ALRfdO3bsiJCQELRo0QJ+fn7w8PCAi4sL7OzsOJ1KRQWKioqQm5uLe/fu4c6dO7hx4wYuX75c6xAzk/ak6OjoJZs3b1729ttv4+zZs+jevbvRheTl5cHe3vgoZV5eXrh16xZUKhUNHDiQefDggaR2ma78pDZHdE+FtAEYjdVXLddRxhxT6+fm5qZZ+V944QVdkXkUCUs3+liA/t4y0bpI/F0bGxsaOXIkbd++ne7du6dXEiwtLaX8/HzKz8+n0tJSvfnu3btH27Zto5EjR5KNjY12HRdaqA57BB3S48ePhbFa7QkPD6e5c+fSrl27KC4ujh48eECVlZUaOtVqNZWXl9O9e/fo/Pnz9O2339LMmTOpQ4cOOvtn2LBhGvdFvIW9pC6ZrAA8toBylAXwp4R0GuKkT0jXFfPN2dwTHwHjxo1jwdkZWRwMw1icYfFl1hX+tIAOS87ILYkdO3Yk7Xtz2dnZtHfvXpo3bx4NGDCA/P39a6Xd39+fBgwYQPPmzaO9e/fSw4cPq5UZFxdHnTp1Eu7zWRIbJk6cSIKPtejoaBoyZAgdP35cJ7O9fv06nTp1ig4dOkT79u2jQ4cOUWxsLN26dasaIxMQHR1N/fv3J29vb/rll1+IiKisrIzlFfX9DRrnZlTuHICusJyLmv8Hzq2FpTEVT/vc1pbAGACd9AyAZAAtzKnnkydP4OTkhIULF+Lzzz8/Cv0+vs3B0AsXLhxydbWMS+2CggJ07dr1FQA/1QGzsnvnnXfKvbzMc+2Uk5ODyMhIO8jkTG7Lli3XpkyZEnL48GFm7969OHjwIJ48eWKRshs2bIhhw4Zh9OjRiIiIoK1bt96YMmVKOwmqMcTR0fHHP//808bX11cz5s+cOYOff/4Zp0+fRkJCgkEF2draIjw8HH369MErr7yCTp06VRfp9uzB+PHj7xFRV5ZlM6VkWG9BGrcdfSHNMfS6WrZi7wPYoON9PCwQaTctLQ3+/v7YuHEj3nvvvWvgfHFZGhkvvviib6NGjSyygOTl5dG5c+cyAfjLza3atWv30tWrV49Yoqz27dsPvnbt2lGZSHfB3yHuGIm+IZStAuenShLdLxE9KS4uxieffIKNGzfWqEO0tbWFtbU11Go11Gr9B+ENGjTAnDlzsHTpUhQUFMDLy2sxavepZRGGxVpAQtPVEY/AOQKUZNXmGUUxuMuV/+Dfb4ZuS+hLAEIt8eErV66gQ4cO2LNnD8aOHZsjQR1Xr1mzZr6NjWUvuavVasyfP38N9PsslwqTVSrVt+ZKiwUFBSgsLJwMef3Rv7Nnz55NL7zwgiSFx8XFYcyYMTMgsa8yR0dHKi39Ozati4sLXnrpJXTr1g2hoaEIDg5GTRLw/fv3kZycjMTERJw9exZHjx5FRUXF35PRzo6tqKgwWndtygj/SKLVgwHn3nUUpHF6VwHgd/7vbuBswG4ByNCljwDQ0VIfLi4uBgC4ubkBljdrWABgPu9czaL9wpc5H5wPMVlj/xUWFqKwsNAiZcnMbE/UJGVYYhGB/ig9FkNpaSlsbW3x3nvv4e2330bLli2rpSclJSEhIQGPHj1CYWEh1Go1bG1t4erqCm9vbwQFBaF3797o3bs35s3jvENfvnwZkZGR2LJlCyoqKhi5OqSmQKmWsCn5HXWLY5DgEjQR0dmzZ6XwAbYE0tv61IWjxYUWoHtpHdD9pgz98ZbUlVi2bJlGWV5RUUE7d+6kUaNGkYeHh1G0+vj40IQJEzSefQXMnj1bFl947SCPMZxzHTGreVLU59ixY0REFB8frzAs4+DM6zjuouYL6OJ3d/nf1MUYajF+/HiKiIiQzOdaREQEO3HiRALnv10q2Pz111+UnJxMERERemmxt7cnHx8fCg4OptatW1OLFi2oSZMmukwvNM/rr79OmZmZlJ6ebtI8MFYsWwTddkqWxnhwYbjkhBOAJ1IoTE+cOIH+/fsjMTFROCmxZPmfODs7r7S0/kq8BSkuLhaCCUgFN3AXlBuCi9Zixz8OPONxBOduZAKARnrKeAxgF4Cb4IJOFAEo41UBFeBOCp8AyOa3uFLgJhG1Evr3/Pnz+OWXXxAbG4v4+HiIdUIGDUgnJ3Tu3Bk9e/bEgAED0LVrVyGJGIb5GtJGG6/GUDp06IBBgwahW7du6NixI3x9fWstIDU1FYmJiThz5gyOHTuG5ORkcTILE+wvjR3lckRPIf47cjOsj01k4obogqr9y09Kc47a/wU+anDjxo1ds7KyJG2YJk2afJidnT2Vb5sD0B2yylhMAedKJtSIcVFT37iDO+01tP+OgfPcmWSpZgLQ2sPDA6NHj8aIESPQp08fdOvW7e8ZyrJISkpCRkYGsrOzkZ+fj/LycgCAvb093Nzc0LhxYwQEBKBVq1awsrKq9oFTp07hwIED2LVrFwMZ4gT4+vpi/vz5mDZtWjUr9rS0NBw9ehR3797V6LAqKythb28PlUql0WGFhIRgxIgRGDGCi7ZWUFCATZs2Ye3atcjPz5dFh1Uk05bwKuRHslT1OXfunMbgD7qjnxiLDNTd3bUMM2m3E7U1i7q9g2fJqDrfOTk5PVWftm3b0ttvv01RUVF0/vz5p4xAdeHhw4d07tw5ioqKomnTplFISMhT9Ds7O2v7eLfoGrtz504NPampqfTZZ59ReHi4SW3do0cPWrt2LeXk5GjKXL9+vSw6LLkGU13EK5SsPomJidpKd3MZVlodTvQ0M2n/s44ZlSQLpJub20UiYsvLyykqKor69etnkMM6lUpFKpWKGjRoUGv+/v37U1RUFJWXlxMRUevWrYdKNRlyc3PLjh8/rpNZmvN07dqVPXv2LN2/fz9D6gndSOZBJCc8paxLUlISEREdO3ZMeGf9P8qwGlhQsvqVfywlaTmY2ScDP/roI0pLS6vmXeLy5cu0YcMGGjduHLVv357s7OwMcvzYvn17GjduHG3YsIEuX75cTQJLTU1lP/jgA+J1e1JiPi88WKLPhN8/Bnf7xDTRz4i8PgAyZWQijIzfEiyUJUFCQgKaNGmCw4cPY/r06Zao21VwJ7Z1AXMt9bsA2AHO0+wtAIcAJPBjqxici2AbXgq1FelZK8BFg87W0Veu4IxxnfgtJ8D5wqoEUM7/bc0r8H3B3V54BZzL6rsAJgL4zQJt0wfAGm9v704jR45EREQE9evXj9F1IFJQUKBTh6XLWFatVuPXX3+lw4cPM/v378fDhw8v8fq/BJn6fDjPZAYZoVMUpxOAaHBX5E7IxRS8wLmDKZOhgZzwtyW6XFDxA9+isLGxEV9XYGxsbHLUanWpmcVagQuNzsrcRlbgvMTK/d1nDdYAhgGIANDXw8PDr1OnTmjbti2Cg4NrdS+TkZGBO3fu4Pr167h06RJyc3PvATgJzofcQZ6p1xWeB3eHOIRfdITTXRt+UXkCIAuc04FrAM5b8GBDVilGgYL/ZXTkJ3lzcFGbPfhF0k4kQRYCyAVwD8AdcCYal5WmU6BAgQIFChQoUKBAgQIFChQoUKDg2cH/BxOdkZb0fbRFAAAAAElFTkSuQmCC);;
}

.white.pawn {
    background-position: 0 0; 
}

.white.knigh {
    background-position: -50px 0; 
}

.white.rook {
    background-position: -100px 0; 
}

.white.bishop {
    background-position: -150px 0; 
}

.white.queen {
    background-position: -200px 0; 
}

.white.king {
    background-position: -250px 0; 
}

.black.pawn {
    background-position: 0 -50px; 
}

.black.knight {
    background-position: -50px -50px; 
}

.black.rook {
    background-position: -100px -50px; 
}

.black.bishop {
    background-position: -150px -50px; 
}

.black.queen {
    background-position: -200px -50px; 
}

.black.king {
    background-position: -250px -50px; 
}

        </style>
    </head>
    <body>
        <div class="board"></div>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>
            var Piece = function(type, color) {
    this._type = type;
    this._color = color;
    this._node = null;
};

Piece.TYPES = {
    PAWN: 'pawn',
    KNIGHT: 'knight',
    ROOK: 'rook',
    BISHOP: 'bishop',
    QUEEN: 'queen',
    KING: 'king'
};

Piece.COLORS = {
    WHITE: 'white',
    BLACK: 'black'
};

Piece.prototype.getNode = function() {
    if (!this._node) {
        this._node = $('<div class="piece ' + this._type + ' ' + this._color + '"></div>');
    }
    return this._node;
};

            var PieceBuilder = function(color, field, node) {
    this._color = color;
    this._field = field;
    this._node = node;
};

PieceBuilder.prototype._createPiece = function(type, x, y) {
    var piece = new Piece(type, this._color);
    this._field[y][x] = piece;
    var node = piece.getNode();
    this._node.find('tr:eq(' + y + ') td:eq(' + x + ')').append(node);
};

PieceBuilder.prototype._createPawns = function() {
    var y = this._color == Piece.COLORS.WHITE ? 6 : 1;
    for (var x = 0; x < 8; x += 1) {
        this._createPiece(Piece.TYPES.PAWN, x, y);
    }
};

PieceBuilder.prototype._createOtherPieces = function() {
    var y = this._color == Piece.COLORS.WHITE ? 7 : 0;
    this._createPiece(Piece.TYPES.ROOK, 0, y);
    this._createPiece(Piece.TYPES.KNIGHT, 1, y);
    this._createPiece(Piece.TYPES.BISHOP, 2, y);
    this._createPiece(Piece.TYPES.QUEEN, 3, y);
    this._createPiece(Piece.TYPES.KING, 4, y);
    this._createPiece(Piece.TYPES.BISHOP, 5, y);
    this._createPiece(Piece.TYPES.KNIGHT, 6, y);
    this._createPiece(Piece.TYPES.ROOK, 7, y);
};

PieceBuilder.prototype.build = function() {
    this._createPawns();
    this._createOtherPieces();
};

            var Board = function() {
    this._node = $('.board');
    this._field = null;
};

Board.SIZE = 8;

Board.prototype._createField = function() {
    this._field = [];
    for (var i = 0; i < Board.SIZE; i += 1) {
        var row = [];
        for (var j = 0; j < Board.SIZE; j += 1) {
            row.push(null);
        }
        this._field.push(row);
    }
};

Board.prototype._createFieldTable = function() {
    var table = $('<table></table>');
    for (var i = 0; i < Board.SIZE; i += 1) {
        var row = $('<tr></tr>');
        for (var j = 0; j < Board.SIZE; j += 1) {
            row.append('<td></td>');
        }
        table.append(row);
    }
    this._node.append(table);
};

Board.prototype._createPieces = function() {
    for (var i in Piece.COLORS) {
        var color = Piece.COLORS[i];
        var builder = new PieceBuilder(color, this._field, this._node);
        builder.build();
    }
};

Board.prototype.init = function() {
    this._createField();
    this._createFieldTable();
    this._createPieces();
};

            var Gadget = function() {
    
};

Gadget.prototype.init = function() {
    var board = new Board();
    board.init();
};

            (function() {
                var gadget = new Gadget();
                gadget.init();
            })();
        </script>
    </body>
</html>

<script>
    $(document).ready(function() {
        for (var i in callbacks) {
            callbacks[i]();
        }
        wave.participantCallback();
        wave.stateCallback();
    });
</script>
